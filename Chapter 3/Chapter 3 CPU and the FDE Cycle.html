<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 3: Hardware</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .quiz-option {
            transition: background-color 0.3s, border-color 0.3s;
        }
        .correct {
            background-color: #d1fae5 !important; /* Tailwind green-100 */
            border-color: #10b981 !important; /* Tailwind green-500 */
            color: #047857; /* Tailwind green-800 */
        }
        .incorrect {
            background-color: #fee2e2 !important; /* Tailwind red-100 */
            border-color: #ef4444 !important; /* Tailwind red-500 */
            color: #b91c1c; /* Tailwind red-800 */
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800 flex items-center justify-center min-h-screen p-4">

    <div class="w-full max-w-3xl bg-white rounded-2xl shadow-lg p-6 md:p-8">
        <header class="mb-8 text-center">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-900">Chapter 3: Hardware (CPU and the FDE cycle)</h1>
            <p class="text-gray-500 mt-2">Test your knowledge of the CPU and the FDE cycle.</p>
        </header>

        <div id="quiz-container" class="space-y-8">
            </div>

        <div id="results-container" class="text-center mt-10 hidden">
            <h2 id="score-text" class="text-2xl font-bold mb-4"></h2>
            <button id="redo-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg transition-colors duration-300">
                Redo Quiz
            </button>
        </div>
    </div>

    <script>
        const quizData = [
    {
        "question": "What is the primary function of the Control Unit (CU) within the CPU?",
        "options": [
            "To perform all mathematical calculations and logical operations.",
            "To store frequently used instructions and data.",
            "To manage and coordinate the activities of the CPU, directing the flow of data.",
            "To hold the address of the next instruction to be processed."
        ],
        "answer": "To manage and coordinate the activities of the CPU, directing the flow of data."
    },
    {
        "question": "Which component of the CPU is responsible for carrying out arithmetic and logic operations?",
        "options": [
            "Control Unit (CU)",
            "Memory Address Register (MAR)",
            "Arithmetic Logic Unit (ALU)",
            "Program Counter (PC)"
        ],
        "answer": "Arithmetic Logic Unit (ALU)"
    },
    {
        "question": "A manufacturer releases a new processor with a higher clock speed. What is the direct impact of this change?",
        "options": [
            "The processor can execute more Fetch-Decode-Execute cycles per second.",
            "The amount of cache memory is increased.",
            "The processor can run more programs simultaneously.",
            "The physical size of the CPU is reduced."
        ],
        "answer": "The processor can execute more Fetch-Decode-Execute cycles per second."
    },
    {
        "question": "What is the role of cache memory in improving CPU performance?",
        "options": [
            "It provides long-term, non-volatile storage for the operating system.",
            "It is a type of ROM that stores the computer's boot-up sequence.",
            "It stores frequently accessed data and instructions, providing faster access than RAM.",
            "It increases the number of processing cores in the CPU."
        ],
        "answer": "It stores frequently accessed data and instructions, providing faster access than RAM."
    },
    {
        "question": "A computer has a quad-core processor. What does this mean?",
        "options": [
            "The processor has four separate cache memory modules.",
            "The processor can execute four instructions in a single clock cycle.",
            "The processor contains four independent processing units (cores).",
            "The clock speed of the processor is four times that of a single-core CPU."
        ],
        "answer": "The processor contains four independent processing units (cores)."
    },
    {
        "question": "Which register holds the address of the next instruction to be fetched from memory?",
        "options": [
            "Memory Address Register (MAR)",
            "Memory Data Register (MDR)",
            "Program Counter (PC)",
            "Accumulator (ACC)"
        ],
        "answer": "Program Counter (PC)"
    },
    {
        "question": "During the Fetch stage of the FDE cycle, the address from the Program Counter is copied to which register?",
        "options": [
            "Current Instruction Register (CIR)",
            "Memory Data Register (MDR)",
            "Accumulator (ACC)",
            "Memory Address Register (MAR)"
        ],
        "answer": "Memory Address Register (MAR)"
    },
    {
        "question": "After an instruction is fetched from the memory location held in the MAR, where is it temporarily stored?",
        "options": [
            "In the Program Counter (PC)",
            "In the Memory Data Register (MDR)",
            "In the Arithmetic Logic Unit (ALU)",
            "In the Control Unit (CU)"
        ],
        "answer": "In the Memory Data Register (MDR)"
    },
    {
        "question": "What happens during the 'Decode' stage of the Fetch-Decode-Execute cycle?",
        "options": [
            "The instruction is retrieved from RAM.",
            "The Control Unit interprets the instruction to determine what action to perform.",
            "The Arithmetic Logic Unit performs the calculation.",
            "The Program Counter is incremented."
        ],
        "answer": "The Control Unit interprets the instruction to determine what action to perform."
    },
    {
        "question": "In the 'Execute' stage, the instruction that was decoded is finally carried out. Which component is primarily responsible for this?",
        "options": [
            "The Program Counter (PC)",
            "The Memory Address Register (MAR)",
            "The Arithmetic Logic Unit (ALU) or other relevant hardware.",
            "The system clock."
        ],
        "answer": "The Arithmetic Logic Unit (ALU) or other relevant hardware."
    },
    {
        "question": "What is the final step of the Fetch stage in the FDE cycle?",
        "options": [
            "The instruction is executed.",
            "The address is sent down the address bus.",
            "The Program Counter (PC) is incremented by one.",
            "The instruction is decoded by the CU."
        ],
        "answer": "The Program Counter (PC) is incremented by one."
    },
    {
        "question": "Which bus is used to transfer the actual instruction from RAM to the CPU?",
        "options": [
            "Address Bus",
            "Data Bus",
            "Control Bus",
            "System Bus"
        ],
        "answer": "Data Bus"
    },
    {
        "question": "A CPU with a larger cache size will likely perform better because...",
        "options": [
            "it has more cores to process data.",
            "its clock speed is automatically increased.",
            "it reduces the need to access the slower main memory (RAM) as frequently.",
            "it can store the entire operating system."
        ],
        "answer": "it reduces the need to access the slower main memory (RAM) as frequently."
    },
    {
        "question": "Which register holds the results of calculations performed by the ALU?",
        "options": [
            "Program Counter (PC)",
            "Memory Address Register (MAR)",
            "Accumulator (ACC)",
            "Current Instruction Register (CIR)"
        ],
        "answer": "Accumulator (ACC)"
    },
    {
        "question": "What is meant by the 'architecture' of a CPU?",
        "options": [
            "The physical size and shape of the processor.",
            "The design and layout of the internal components of the CPU, like the CU, ALU, and registers.",
            "The speed at which the CPU operates.",
            "The company that manufactured the CPU."
        ],
        "answer": "The design and layout of the internal components of the CPU, like the CU, ALU, and registers."
    },
    {
        "question": "Increasing the number of cores in a CPU is most beneficial for which scenario?",
        "options": [
            "Running a single, simple application like a text editor.",
            "Performing tasks that can be split into smaller parts and run in parallel, like video editing.",
            "Increasing the speed of data transfer from the hard drive.",
            "Improving the quality of the graphics displayed on the monitor."
        ],
        "answer": "Performing tasks that can be split into smaller parts and run in parallel, like video editing."
    },
    {
        "question": "The speed of the Fetch-Decode-Execute cycle is determined by...",
        "options": [
            "the amount of RAM installed.",
            "the size of the hard drive.",
            "the system clock.",
            "the number of connected peripherals."
        ],
        "answer": "the system clock."
    },
    {
        "question": "Which of these is NOT a factor that directly affects a CPU's performance?",
        "options": [
            "Clock speed",
            "Number of cores",
            "Screen resolution",
            "Cache size"
        ],
        "answer": "Screen resolution"
    },
    {
        "question": "What is a CPU register?",
        "options": [
            "A large, long-term storage area.",
            "A small, high-speed temporary storage location within the CPU.",
            "A tool for managing user accounts.",
            "A component that cools the processor."
        ],
        "answer": "A small, high-speed temporary storage location within the CPU."
    },
    {
        "question": "During the FDE cycle, the instruction is copied from the MDR to which register for decoding?",
        "options": [
            "Program Counter (PC)",
            "Accumulator (ACC)",
            "Memory Address Register (MAR)",
            "Current Instruction Register (CIR)"
        ],
        "answer": "Current Instruction Register (CIR)"
    },
    {
        "question": "The Von Neumann architecture is significant because it introduced the concept of...",
        "options": [
            "having multiple processing cores.",
            "using graphical user interfaces.",
            "storing both data and instructions in the same memory unit.",
            "using wireless connectivity."
        ],
        "answer": "storing both data and instructions in the same memory unit."
    },
    {
        "question": "Why is cache memory faster to access than RAM?",
        "options": [
            "It holds more data than RAM.",
            "It is physically located closer to the CPU cores.",
            "It is a non-volatile type of memory.",
            "It uses a different bus system."
        ],
        "answer": "It is physically located closer to the CPU cores."
    },
    {
        "question": "A clock speed of 3.2 GHz means that the CPU can perform...",
        "options": [
            "3.2 million cycles per second.",
            "3.2 billion cycles per second.",
            "3.2 thousand cycles per second.",
            "3.2 trillion cycles per second."
        ],
        "answer": "3.2 billion cycles per second."
    },
    {
        "question": "Which of the following would NOT be processed by the ALU?",
        "options": [
            "ADD R1, R2",
            "COMPARE R1, R3",
            "LOAD R1, [address]",
            "OR R1, R4"
        ],
        "answer": "LOAD R1, [address]"
    },
    {
        "question": "An embedded system, like in a microwave oven, typically has a CPU designed for...",
        "options": [
            "high-performance multitasking and gaming.",
            "a specific, dedicated function with low power consumption.",
            "running a wide variety of general-purpose software.",
            "connecting to the internet to download updates."
        ],
        "answer": "a specific, dedicated function with low power consumption."
    }
];

        const quizContainer = document.getElementById('quiz-container');
        const resultsContainer = document.getElementById('results-container');
        const scoreText = document.getElementById('score-text');
        const redoBtn = document.getElementById('redo-btn');

        let score = 0;
        let questionsAnswered = 0;

        /**
         * NEW: Function to shuffle an array in place using the Fisher-Yates algorithm.
         * @param {Array} array The array to shuffle.
         * @returns {Array} The shuffled array.
         */
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]]; // Swap elements
            }
            return array;
        }

        // MODIFIED: Function to build and display the quiz
        function buildQuiz() {
            quizContainer.innerHTML = '';
            
            // Create a shuffled copy of the questions to not alter the original array
            const shuffledQuestions = shuffleArray([...quizData]);

            shuffledQuestions.forEach((currentQuestion, questionNumber) => {
                const questionDiv = document.createElement('div');
                questionDiv.classList.add('question-block');

                const questionTitle = document.createElement('h2');
                questionTitle.classList.add('text-lg', 'font-semibold', 'mb-4');
                questionTitle.innerText = `${questionNumber + 1}. ${currentQuestion.question}`;
                questionDiv.appendChild(questionTitle);

                const optionsDiv = document.createElement('div');
                optionsDiv.classList.add('grid', 'grid-cols-1', 'sm:grid-cols-2', 'gap-3');
                
                // Create a shuffled copy of the options for the current question
                const shuffledOptions = shuffleArray([...currentQuestion.options]);

                shuffledOptions.forEach(option => {
                    const button = document.createElement('button');
                    button.classList.add('quiz-option', 'w-full', 'p-3', 'text-left', 'border-2', 'border-gray-300', 'rounded-lg', 'hover:bg-gray-100', 'hover:border-blue-500', 'focus:outline-none', 'focus:ring-2', 'focus:ring-blue-400');
                    button.innerText = option;
                    // Pass the whole question object and the options container for context
                    button.onclick = () => selectAnswer(button, option, currentQuestion, optionsDiv);
                    optionsDiv.appendChild(button);
                });

                questionDiv.appendChild(optionsDiv);
                quizContainer.appendChild(questionDiv);
            });
        }

        // MODIFIED: Function to handle answer selection
        function selectAnswer(selectedButton, selectedOption, currentQuestion, optionsContainer) {
            const options = optionsContainer.querySelectorAll('.quiz-option');
            const correctAnswer = currentQuestion.answer;

            // Disable all buttons for this question to prevent changing the answer
            options.forEach(button => {
                button.disabled = true;
                if (button.innerText === correctAnswer) {
                    button.classList.add('correct');
                }
            });

            if (selectedOption !== correctAnswer) {
                selectedButton.classList.add('incorrect');
            } else {
                score++;
            }

            questionsAnswered++;

            // Check if all questions have been answered
            if (questionsAnswered === quizData.length) {
                showResults();
            }
        }

        // Function to display the final score
        function showResults() {
            scoreText.innerText = `You scored ${score} out of ${quizData.length}!`;
            resultsContainer.classList.remove('hidden');
        }

        // Function to reset the quiz
        function redoQuiz() {
            score = 0;
            questionsAnswered = 0;
            resultsContainer.classList.add('hidden');
            
            // Re-build the quiz to get a new random order
            buildQuiz();

            quizContainer.scrollIntoView({ behavior: 'smooth' });
        }
        
        // Event listener for the redo button
        redoBtn.addEventListener('click', redoQuiz);

        // Initialize the quiz when the page loads
        document.addEventListener('DOMContentLoaded', buildQuiz);
    </script>
</body>
</html>